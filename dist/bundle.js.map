{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/cell.js","webpack:///./src/js/index.js"],"names":["Cell","x","y","type","dir","cvs","document","querySelector","ctx","getContext","width","height","emptyCellImage","Image","snakeCellImage","appleCellImage","src","onload","start","update","onkeydown","event","key","turnLeft","turnRight","turnUp","turnDown","initXPos","initYPos","initLength","speed","cells","snakeCells","lengthEl","length","needGrowth","cellType","empty","snake","apple","direction","up","right","down","left","cellCount","i","column","j","undefined","generateApple","setTimeout","move","row","cell","drawImage","getImage","innerText","requestAnimationFrame","rand","Math","floor","random","wasGrowth","grow","newSnakeCells","growed","c","isHead","isEnd","die","push","lastCell","dieMessage","style","display","snakeHead"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/index.js\");\n","export default class Cell {\r\n    constructor(x, y, type, dir) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.type = type;\r\n        this.dir = dir;\r\n    }\r\n}","import Cell from './cell'\r\n\r\nlet cvs = document.querySelector('#canvas');\r\nlet ctx = cvs.getContext('2d');\r\n\r\ncvs.width = 510;\r\ncvs.height = 510;\r\n\r\nlet emptyCellImage = new Image();\r\nlet snakeCellImage = new Image();\r\nlet appleCellImage = new Image();\r\n\r\nemptyCellImage.src = './resources/emptyCell.png';\r\nsnakeCellImage.src = './resources/snakeCell.png';\r\nappleCellImage.src = './resources/appleCell.png';\r\n\r\nappleCellImage.onload = () => {\r\n    start();\r\n    update();\r\n};\r\n\r\ndocument.onkeydown = (event) => {\r\n    if(event.key === 'ArrowLeft') turnLeft();\r\n    else if(event.key === 'ArrowRight') turnRight();\r\n    else if(event.key === 'ArrowUp') turnUp();\r\n    else if(event.key === 'ArrowDown') turnDown();\r\n};\r\n\r\nlet initXPos = 6;\r\nlet initYPos = 9;\r\nlet initLength = 8;\r\nlet speed = 100;\r\n\r\nlet cells;\r\nlet snakeCells;\r\nlet lengthEl = document.querySelector('#length');\r\nlet length = initLength;\r\nlet needGrowth = false;\r\n\r\nlet cellType = {\r\n    empty: 0,\r\n    snake: 1,\r\n    apple: 2\r\n};\r\nlet direction = {\r\n    up: 0,\r\n    right: 1,\r\n    down: 3,\r\n    left: 4\r\n};\r\n\r\nfunction start() {\r\n    let cellCount = cvs.width / emptyCellImage.width;\r\n    cells = [];\r\n    snakeCells = [];\r\n    for(let i = 0; i < cellCount; i++) {\r\n        let column = [];\r\n        for(let j = 0; j < cellCount; j++) {\r\n            column[j] = new Cell(i*emptyCellImage.width, j*emptyCellImage.height, cellType.empty, undefined);\r\n        }\r\n        cells[i] = column;\r\n    }\r\n    for(let j = 0; j < initLength; j++) {\r\n        snakeCells[j] = {\r\n            x: initXPos,\r\n            y: j + initYPos\r\n        };\r\n        cells[initXPos][j + initYPos].type = cellType.snake;\r\n        cells[initXPos][j + initYPos].dir = direction.up;\r\n    }\r\n    generateApple();\r\n    setTimeout(move, speed);\r\n}\r\n\r\nfunction update() {\r\n    for(let row of cells) {\r\n        for(let cell of row) {\r\n            ctx.drawImage(getImage(cell.type), cell.x, cell.y);\r\n        }\r\n    }\r\n    lengthEl.innerText = length;\r\n    requestAnimationFrame(update);\r\n}\r\n\r\nfunction generateApple() {\r\n    let rand = () => Math.floor(Math.random() * cells.length);\r\n    let x = rand();\r\n    let y = rand();\r\n    while(cells[x][y].type === cellType.snake) {\r\n        x = rand();\r\n        y = rand();\r\n    }\r\n    cells[x][y].type = cellType.apple;\r\n}\r\n\r\nfunction move() {\r\n    //debugger;\r\n    let wasGrowth = false;\r\n    if(needGrowth) {\r\n        needGrowth = false;\r\n        wasGrowth = true;\r\n        grow();\r\n    }\r\n    let newSnakeCells = [];\r\n    for(let i = 0; i < snakeCells.length; i++) {\r\n        let x = snakeCells[i].x;\r\n        let y = snakeCells[i].y;\r\n        if(cells[x][y].growed === true) {\r\n            debugger;\r\n            cells[x][y].growed = false;\r\n            cells[x][y].dir = cells[snakeCells[i-1].x][snakeCells[i-1].y].dir;\r\n        }\r\n        let c = cells[x][y];\r\n        let isHead = i === 0;\r\n        let isEnd = i === snakeCells.length - 1;\r\n        cells[x][y].type = cellType.empty;\r\n        x += c.dir === direction.right ? 1 : (c.dir === direction.left ? -1 : 0);\r\n        y += c.dir === direction.down ? 1 : (c.dir === direction.up ? -1 : 0);\r\n        if(!(0 <= x && x < cells.length && 0 <= y && y < cells.length)) {\r\n            //debugger;\r\n            die();\r\n            return;\r\n        }\r\n        if(isHead) {\r\n            if(cells[x][y].type === cellType.snake) {\r\n                //debugger;\r\n                die();\r\n                return;\r\n            } else if(cells[x][y].type === cellType.apple) {\r\n                debugger;\r\n                grow();\r\n                if(!needGrowth) {\r\n                    length++;\r\n                    generateApple();\r\n                }\r\n            }\r\n            cells[x][y].dir = c.dir;\r\n        }\r\n        else if(isEnd) {\r\n            //debugger;\r\n            cells[c.x/emptyCellImage.width][c.y/emptyCellImage.width].dir = undefined;\r\n        }\r\n        cells[x][y].type = cellType.snake;\r\n        newSnakeCells[i] = {\r\n            x: x,\r\n            y: y\r\n        };\r\n    }\r\n    if(wasGrowth)\r\n        newSnakeCells.push(snakeCells[snakeCells.length-1]);\r\n    snakeCells = newSnakeCells;\r\n    setTimeout(move, speed);\r\n}\r\n\r\nfunction grow() {\r\n    let lastCell = snakeCells[snakeCells.length-1];\r\n    let x = lastCell.x;\r\n    let y = lastCell.y;\r\n    let c = cells[x][y];\r\n    x += c.dir === direction.right ? -1 : (c.dir === direction.left ? 1 : 0);\r\n    y += c.dir === direction.down ? -1 : (c.dir === direction.up ? 1 : 0);\r\n    if(!(0 <= x && x < cells.length && 0 <= y && y < cells.length) || cells[x][y].type === cellType.snake) {\r\n        //debugger;\r\n        needGrowth = true;\r\n        return;\r\n    }\r\n    cells[x][y].type = cellType.snake;\r\n    cells[x][y].growed = true;\r\n    snakeCells[snakeCells.length] = {\r\n        x: x,\r\n        y: y\r\n    };\r\n}\r\n\r\nfunction die() {\r\n    let dieMessage = document.querySelector('#die-message');\r\n    dieMessage.style.display = 'block';\r\n}\r\n\r\nfunction turnLeft() {\r\n    let snakeHead = cells[snakeCells[0].x][snakeCells[0].y];\r\n    if(snakeHead.dir === direction.left || snakeHead.dir === direction.right)\r\n        return;\r\n    snakeHead.dir = direction.left;\r\n}\r\n\r\nfunction turnRight() {\r\n    let snakeHead = cells[snakeCells[0].x][snakeCells[0].y];\r\n    if(snakeHead.dir === direction.left || snakeHead.dir === direction.right)\r\n        return;\r\n    snakeHead.dir = direction.right;\r\n}\r\n\r\nfunction turnUp() {\r\n    let snakeHead = cells[snakeCells[0].x][snakeCells[0].y];\r\n    if(snakeHead.dir === direction.up || snakeHead.dir === direction.down)\r\n        return;\r\n    snakeHead.dir = direction.up;\r\n}\r\n\r\nfunction turnDown() {\r\n    let snakeHead = cells[snakeCells[0].x][snakeCells[0].y];\r\n    if(snakeHead.dir === direction.up || snakeHead.dir === direction.down)\r\n        return;\r\n    snakeHead.dir = direction.down;\r\n}\r\n\r\nfunction getImage(type) {\r\n    switch(type) {\r\n        case cellType.empty:\r\n            return emptyCellImage;\r\n        case cellType.snake:\r\n            return snakeCellImage;\r\n        case cellType.apple:\r\n            return appleCellImage;\r\n    }\r\n}"],"sourceRoot":""}