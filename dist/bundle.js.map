{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/cell.js","webpack:///./src/js/index.js"],"names":["Cell","x","y","type","dir","cvs","document","querySelector","ctx","getContext","width","height","emptyCellImage","Image","snakeCellImage","appleCellImage","src","onload","start","update","turning","onkeydown","event","setTimeout","key","turnLeft","turnRight","turnUp","turnDown","initXPos","initYPos","initLength","speed","cells","snakeCells","lengthEl","length","needGrowth","cellType","empty","snake","apple","direction","up","right","down","left","cellCount","i","column","j","undefined","generateApple","move","row","cell","drawImage","getImage","innerText","requestAnimationFrame","rand","Math","floor","random","wasGrowth","grow","newSnakeCells","growed","c","isHead","isEnd","die","lastCell","dieMessage","style","display","snakeHead"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/index.js\");\n","export default class Cell {\r\n    constructor(x, y, type, dir) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.type = type;\r\n        this.dir = dir;\r\n    }\r\n}","import Cell from './cell'\r\n\r\nlet cvs = document.querySelector('#canvas');\r\nlet ctx = cvs.getContext('2d');\r\n\r\ncvs.width = 510;\r\ncvs.height = 510;\r\n\r\nlet emptyCellImage = new Image();\r\nlet snakeCellImage = new Image();\r\nlet appleCellImage = new Image();\r\n\r\nemptyCellImage.src = './resources/emptyCell.png';\r\nsnakeCellImage.src = './resources/snakeCell.png';\r\nappleCellImage.src = './resources/appleCell.png';\r\n\r\nappleCellImage.onload = () => {\r\n    start();\r\n    update();\r\n};\r\n\r\nlet turning = false;\r\n\r\ndocument.onkeydown = (event) => {\r\n    if(turning) {\r\n        setTimeout(() => document.onkeydown(event), 20);\r\n        return;\r\n    }\r\n    turning = true;\r\n    if(event.key === 'ArrowLeft') turnLeft();\r\n    else if(event.key === 'ArrowRight') turnRight();\r\n    else if(event.key === 'ArrowUp') turnUp();\r\n    else if(event.key === 'ArrowDown') turnDown();\r\n};\r\n\r\nlet initXPos = 6;\r\nlet initYPos = 9;\r\nlet initLength = 4;\r\nlet speed = 100;\r\n\r\nlet cells;\r\nlet snakeCells;\r\nlet lengthEl = document.querySelector('#length');\r\nlet length = initLength;\r\nlet needGrowth = false;\r\n\r\nlet cellType = {\r\n    empty: 0,\r\n    snake: 1,\r\n    apple: 2\r\n};\r\nlet direction = {\r\n    up: 0,\r\n    right: 1,\r\n    down: 2,\r\n    left: 3\r\n};\r\n\r\nfunction start() {\r\n    let cellCount = cvs.width / emptyCellImage.width;\r\n    cells = [];\r\n    snakeCells = [];\r\n    for(let i = 0; i < cellCount; i++) {\r\n        let column = [];\r\n        for(let j = 0; j < cellCount; j++) {\r\n            column[j] = new Cell(i*emptyCellImage.width, j*emptyCellImage.height, cellType.empty, undefined);\r\n        }\r\n        cells[i] = column;\r\n    }\r\n    for(let j = 0; j < initLength; j++) {\r\n        snakeCells[j] = {\r\n            x: initXPos,\r\n            y: j + initYPos\r\n        };\r\n        cells[initXPos][j + initYPos].type = cellType.snake;\r\n        cells[initXPos][j + initYPos].dir = direction.up;\r\n    }\r\n    generateApple();\r\n    setTimeout(move, speed);\r\n}\r\n\r\nfunction update() {\r\n    for(let row of cells) {\r\n        for(let cell of row) {\r\n            ctx.drawImage(getImage(cell.type), cell.x, cell.y);\r\n            if(cell.type !== cellType.snake && cell.dir !== undefined);/*debugger;*/\r\n        }\r\n    }\r\n    lengthEl.innerText = length;\r\n    requestAnimationFrame(update);\r\n}\r\nfunction generateApple() {\r\n    let rand = () => Math.floor(Math.random() * cells.length);\r\n    let x = rand();\r\n    let y = rand();\r\n    while(cells[x][y].type === cellType.snake) {\r\n        x = rand();\r\n        y = rand();\r\n    }\r\n    cells[x][y].type = cellType.apple;\r\n}\r\n\r\nfunction move() {\r\n    //document.onkeydown({key: 'ArrowRight'}); document.onkeydown({key: 'ArrowDown'});\r\n    turning = false;\r\n    let wasGrowth = false;\r\n    if(needGrowth) {\r\n        debugger;\r\n        needGrowth = false;\r\n        wasGrowth = true;\r\n        grow();\r\n    }\r\n    let newSnakeCells = [];\r\n    for(let i = 0; i < snakeCells.length; i++) {\r\n        let x = snakeCells[i].x;\r\n        let y = snakeCells[i].y;\r\n        if(cells[x][y].growed === true) {\r\n            cells[x][y].growed = false;\r\n            cells[x][y].dir = cells[snakeCells[i-1].x][snakeCells[i-1].y].dir;\r\n            if(cells[x][y].dir === undefined) debugger;\r\n        }\r\n        let c = cells[x][y];\r\n        let isHead = i === 0;\r\n        let isEnd = i === snakeCells.length - 1;\r\n        cells[x][y].type = cellType.empty;\r\n        x += c.dir === direction.right ? 1 : (c.dir === direction.left ? -1 : 0);\r\n        y += c.dir === direction.down ? 1 : (c.dir === direction.up ? -1 : 0);\r\n        if(!(0 <= x && x < cells.length && 0 <= y && y < cells.length)) {\r\n            die();\r\n            return;\r\n        }\r\n        if(isHead) {\r\n            if(cells[x][y].type === cellType.snake) {\r\n                die();\r\n                return;\r\n            } else if(cells[x][y].type === cellType.apple) {\r\n                // debugger;\r\n                grow();\r\n                if(!needGrowth) {\r\n                    length++;\r\n                }\r\n                generateApple();\r\n            }\r\n            cells[x][y].dir = c.dir;\r\n        }\r\n        else if(isEnd && !needGrowth /* !!!!!! */) {\r\n            // cells[c.x/emptyCellImage.width][c.y/emptyCellImage.width].dir = undefined;\r\n        }\r\n        cells[x][y].type = cellType.snake;\r\n        newSnakeCells[i] = {\r\n            x: x,\r\n            y: y\r\n        };\r\n    }\r\n    // if(wasGrowth)\r\n    //     newSnakeCells.push(snakeCells[snakeCells.length-1]);\r\n    snakeCells = newSnakeCells;\r\n    setTimeout(move, speed);\r\n}\r\n\r\nfunction grow() {\r\n    let lastCell = snakeCells[snakeCells.length-1];\r\n    let x = lastCell.x;\r\n    let y = lastCell.y;\r\n    let c = cells[x][y];\r\n    x += c.dir === direction.right ? -1 : (c.dir === direction.left ? 1 : 0);\r\n    y += c.dir === direction.down ? -1 : (c.dir === direction.up ? 1 : 0);\r\n    if(!(0 <= x && x < cells.length && 0 <= y && y < cells.length) || cells[x][y].type === cellType.snake) {\r\n        //\r\n        needGrowth = true;\r\n        return;\r\n    }\r\n    cells[x][y].type = cellType.snake;\r\n    cells[x][y].growed = true;\r\n    snakeCells[snakeCells.length] = {\r\n        x: x,\r\n        y: y\r\n    };\r\n}\r\n\r\nfunction die() {\r\n    let dieMessage = document.querySelector('#die-message');\r\n    dieMessage.style.display = 'block';\r\n}\r\n\r\nfunction turnLeft() {\r\n    let snakeHead = cells[snakeCells[0].x][snakeCells[0].y];\r\n    if(snakeHead.dir === direction.left || snakeHead.dir === direction.right)\r\n        return;\r\n    snakeHead.dir = direction.left;\r\n}\r\n\r\nfunction turnRight() {\r\n    let snakeHead = cells[snakeCells[0].x][snakeCells[0].y];\r\n    if(snakeHead.dir === direction.left || snakeHead.dir === direction.right)\r\n        return;\r\n    snakeHead.dir = direction.right;\r\n}\r\n\r\nfunction turnUp() {\r\n    let snakeHead = cells[snakeCells[0].x][snakeCells[0].y];\r\n    if(snakeHead.dir === direction.up || snakeHead.dir === direction.down)\r\n        return;\r\n    snakeHead.dir = direction.up;\r\n}\r\n\r\nfunction turnDown() {\r\n    let snakeHead = cells[snakeCells[0].x][snakeCells[0].y];\r\n    if(snakeHead.dir === direction.up || snakeHead.dir === direction.down)\r\n        return;\r\n    snakeHead.dir = direction.down;\r\n}\r\n\r\nfunction getImage(type) {\r\n    switch(type) {\r\n        case cellType.empty:\r\n            return emptyCellImage;\r\n        case cellType.snake:\r\n            return snakeCellImage;\r\n        case cellType.apple:\r\n            return appleCellImage;\r\n    }\r\n}"],"sourceRoot":""}