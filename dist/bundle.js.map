{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/cell.js","webpack:///./src/js/index.js"],"names":["Cell","x","y","type","dir","cvs","document","querySelector","ctx","getContext","emptyCellImage","Image","snakeCellImage","appleCellImage","src","style","border","console","log","onload","start","update","turning","onkeydown","event","setTimeout","key","turnLeft","turnRight","turnUp","turnDown","initXPos","initYPos","initLength","speed","cellCount","width","height","cells","snakeCells","lengthEl","length","needGrowth","cellType","empty","snake","apple","direction","up","right","down","left","i","column","j","undefined","generateApple","move","row","cell","drawImage","getImage","innerText","requestAnimationFrame","rand","Math","floor","random","grow","newSnakeCells","growed","isHead","die","lastCell","dieMessage","display","snakeHead"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/index.js\");\n","export default class Cell {\r\n    constructor(x, y, type, dir) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.type = type;\r\n        this.dir = dir;\r\n    }\r\n}","import Cell from './cell'\r\n\r\nlet cvs = document.querySelector('#canvas');\r\nlet ctx = cvs.getContext('2d');\r\n\r\nlet emptyCellImage = new Image();\r\nlet snakeCellImage = new Image();\r\nlet appleCellImage = new Image();\r\n\r\nemptyCellImage.src = './resources/emptyCell.png';\r\nsnakeCellImage.src = './resources/snakeCell.png';\r\nappleCellImage.src = './resources/appleCell.png';\r\n\r\nemptyCellImage.style.border = '600px black solid';\r\nconsole.log(emptyCellImage);\r\n\r\nappleCellImage.onload = () => {\r\n    start();\r\n    update();\r\n};\r\n\r\nlet turning = false;\r\n\r\ndocument.onkeydown = (event) => {\r\n    if(turning) {\r\n        setTimeout(() => document.onkeydown(event), 20);\r\n        return;\r\n    }\r\n    turning = true;\r\n    if(event.key === 'ArrowLeft') turnLeft();\r\n    else if(event.key === 'ArrowRight') turnRight();\r\n    else if(event.key === 'ArrowUp') turnUp();\r\n    else if(event.key === 'ArrowDown') turnDown();\r\n};\r\n\r\nlet initXPos = 6;\r\nlet initYPos = 9;\r\nlet initLength = 4;\r\nlet speed = 69;\r\nlet cellCount = 28;\r\n\r\ncvs.width = emptyCellImage.width * cellCount;\r\ncvs.height = emptyCellImage.height * cellCount;\r\n\r\nlet cells;\r\nlet snakeCells;\r\nlet lengthEl = document.querySelector('#length');\r\nlet length = initLength;\r\nlet needGrowth = false;\r\n\r\nlet cellType = {\r\n    empty: 0,\r\n    snake: 1,\r\n    apple: 2\r\n};\r\n\r\nlet direction = {\r\n    up: 0,\r\n    right: 1,\r\n    down: 2,\r\n    left: 3\r\n};\r\n\r\nfunction start() {\r\n    cells = [];\r\n    snakeCells = [];\r\n    for(let i = 0; i < cellCount; i++) {\r\n        let column = [];\r\n        for(let j = 0; j < cellCount; j++) {\r\n            column[j] = new Cell(i, j, cellType.empty, undefined);\r\n        }\r\n        cells[i] = column;\r\n    }\r\n    for(let j = 0; j < initLength; j++) {\r\n        snakeCells[j] = cells[initXPos][j + initYPos];\r\n        cells[initXPos][j + initYPos].type = cellType.snake;\r\n        cells[initXPos][j + initYPos].dir = direction.up;\r\n    }\r\n    generateApple();\r\n    setTimeout(move, speed);\r\n}\r\n\r\nfunction update() {\r\n    for(let row of cells) {\r\n        for(let cell of row) {\r\n            ctx.drawImage(getImage(cell.type), cell.x * emptyCellImage.width, cell.y * emptyCellImage.height);\r\n        }\r\n    }\r\n    lengthEl.innerText = length;\r\n    requestAnimationFrame(update);\r\n}\r\n\r\nfunction generateApple() {\r\n    let rand = () => Math.floor(Math.random() * cells.length);\r\n    let x = rand();\r\n    let y = rand();\r\n    while(cells[x][y].type === cellType.snake) {\r\n        x = rand();\r\n        y = rand();\r\n    }\r\n    cells[x][y].type = cellType.apple;\r\n}\r\n\r\nfunction move() {\r\n    turning = false;\r\n    if(needGrowth) {\r\n        debugger;\r\n        needGrowth = false;\r\n        grow();\r\n    }\r\n    let newSnakeCells = [];\r\n    for(let i = 0; i < snakeCells.length; i++) {\r\n        if(snakeCells[i].growed === true) {\r\n            snakeCells[i].growed = false;\r\n            snakeCells[i].dir = snakeCells[i-1].dir;\r\n        }\r\n        let isHead = i === 0;\r\n        snakeCells[i].type = cellType.empty;\r\n        let x = snakeCells[i].x;\r\n        let y = snakeCells[i].y;\r\n        x += snakeCells[i].dir === direction.right ? 1 : (snakeCells[i].dir === direction.left ? -1 : 0);\r\n        y += snakeCells[i].dir === direction.down ? 1 : (snakeCells[i].dir === direction.up ? -1 : 0);\r\n        if(isHead) {\r\n            if(cells[x] === undefined || cells[x][y] === undefined || cells[x][y].type === cellType.snake) {\r\n                die();\r\n                return;\r\n            } else if(cells[x][y].type === cellType.apple) {\r\n                grow();\r\n                if(!needGrowth) {\r\n                    length++;\r\n                }\r\n                generateApple();\r\n            }\r\n            cells[x][y].dir = snakeCells[i].dir;\r\n        }\r\n        cells[x][y].type = cellType.snake;\r\n        newSnakeCells[i] = cells[x][y];\r\n    }\r\n    snakeCells = newSnakeCells;\r\n    setTimeout(move, speed);\r\n}\r\n\r\nfunction grow() {\r\n    let lastCell = snakeCells[snakeCells.length-1];\r\n    let x = lastCell.x;\r\n    let y = lastCell.y;\r\n    x += lastCell.dir === direction.right ? -1 : (lastCell.dir === direction.left ? 1 : 0);\r\n    y += lastCell.dir === direction.down ? -1 : (lastCell.dir === direction.up ? 1 : 0);\r\n    if(!(0 <= x && x < cells.length && 0 <= y && y < cells.length) || cells[x][y].type === cellType.snake) {\r\n        needGrowth = true;\r\n        return;\r\n    }\r\n    cells[x][y].type = cellType.snake;\r\n    cells[x][y].growed = true;\r\n    snakeCells[snakeCells.length] = cells[x][y];\r\n}\r\n\r\nfunction die() {\r\n    let dieMessage = document.querySelector('#die-message');\r\n    dieMessage.style.display = 'block';\r\n}\r\n\r\nfunction turnLeft() {\r\n    let snakeHead = snakeCells[0];\r\n    if(snakeHead.dir === direction.left || snakeHead.dir === direction.right)\r\n        return;\r\n    snakeHead.dir = direction.left;\r\n}\r\n\r\nfunction turnRight() {\r\n    let snakeHead = snakeCells[0];\r\n    if(snakeHead.dir === direction.left || snakeHead.dir === direction.right)\r\n        return;\r\n    snakeHead.dir = direction.right;\r\n}\r\n\r\nfunction turnUp() {\r\n    let snakeHead = snakeCells[0];\r\n    if(snakeHead.dir === direction.up || snakeHead.dir === direction.down)\r\n        return;\r\n    snakeHead.dir = direction.up;\r\n}\r\n\r\nfunction turnDown() {\r\n    let snakeHead = snakeCells[0];\r\n    if(snakeHead.dir === direction.up || snakeHead.dir === direction.down)\r\n        return;\r\n    snakeHead.dir = direction.down;\r\n}\r\n\r\nfunction getImage(type) {\r\n    switch(type) {\r\n        case cellType.empty:\r\n            return emptyCellImage;\r\n        case cellType.snake:\r\n            return snakeCellImage;\r\n        case cellType.apple:\r\n            return appleCellImage;\r\n    }\r\n}"],"sourceRoot":""}